image: Visual Studio 2017
build_script:
  - ps: .\build.ps1
test: off
after_build:
  - "SET PATH=C:\\Python34;C:\\Python34\\Scripts;%PATH%"
  - pip install codecov
  - codecov -f "./artifacts/coverage/coverage.xml"
artifacts:
  - path: ./artifacts/nuget/*.nupkg
cache:
  - tools -> build.cake, tools/packages.config
nuget:
  project_feed: true
deploy:
  - provider: NuGet
    server: https://www.myget.org/F/rocket-surgeons-guild/api/v2/package
    skip_symbols: false
    symbol_server: https://www.myget.org/F/rocket-surgeons-guild/symbols/api/v2/package
    artifact: /.*\.nupkg/
    on:
      branch: master
  - provider: NuGet
    server: https://www.myget.org/F/rocket-surgeons-guild/api/v2/package
    skip_symbols: false
    symbol_server: https://www.myget.org/F/rocket-surgeons-guild/symbols/api/v2/package
    artifact: /.*\.nupkg/
    on:
      appveyor_repo_tag: true
  - provider: NuGet
    skip_symbols: false
    artifact: /.*\.nupkg/
    on:
      appveyor_repo_tag: true
